<!DOCTYPE html>
{% extends 'staff\base.html' %}
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

{% block head %}
  Заявления
{% endblock %}

{% block additionalcss %}
  <link rel="stylesheet" href="https://cdn.rawgit.com/esvit/ng-table/v1.0.0/dist/ng-table.min.css">
{% endblock %}

{% block leftmenu %}
{% endblock %}

{% block content %}
<form action="{% url 'staff:application_list' %}"  method="GET">
    <table st-table="displayedCollection" st-safe-src="rowCollection" class="table table-striped table-hover">
      <thead>
        <tr class="info">
          <th>№</th>
          <th>Фамилия Имя Отчество</th>
          <th>Форма Обучения</th>
          <th>Дата Подачи Документов</th>
          <th>Тип документа</th>
          <th>Копия/Оригинал</th>
          <th>Направление</th>
          <th>Сумма баллов</th>
          <th>Статус</th>
          <th>Выделить</th>
        </tr>
      </thead>
      <thead>
      <tr>
        <th st-sort="#"></th>
        <th st-sort="FIO">
          <input name="fio" class="form-control" placeholder="Фамилия Имя Отчество" value="{% if not pool == '0' %}{{fname}}{% endif %}"/>
        </th>
        <th st-sort="Form">
          <select class="form-control" name="forma" placeholder="Форма Обучения">
                <option {% if selectform == "1" %} selected {% endif %} value="1">Все</option>
                <option {% if selectform == "2" %} selected {% endif %} value="2">Очная</option>
                <option {% if selectform == "3" %} selected {% endif %} value="3">Заочная</option>
          </select>
        </th>
        <th st-sort="Date" width="8%">          
              <input type="date" name = "datedoc>" id ="datedoc>" value="2016-01-01" class="form-control">           
              <input type="date" name = "datedoc<" id ="datedoc<" value="2018-01-01" class="form-control">
        </th>
        <th st-sort="Doc_Type">        
          <select class="form-control" name="doctype" placeholder="Тип документа">
            <option {% if selectdoc == "0" %} selected {% endif %} value="0">Все</option>
            {% for item in docType %}
            <option {% if selectdoc == item.id %} selected {% endif %} value="{{ item.id }}">{{item.value}}</option>
            {% endfor %}            
          </select>
        </th>
        <th st-sort="isCopy" width="10%">
          <select class="form-control" name="iscopy" placeholder="Копия/Оригинал">
                <option {% if selectcopy == "0" %} selected {% endif %} value="0">Все</option>
                <option {% if selectcopy == "1" %} selected {% endif %} value="1">Копия</option>
                <option {% if selectcopy == "2" %} selected {% endif %} value="2">Оригинал</option>
          </select>          
        </th>
        <th st-sort="Napravlenie">
          <select class="form-control" name="napravlenie" placeholder="Направление">
            <option {% if selectnapr == "0" %} selected {% endif %} value="0">Все</option>            
            {% for item in Profile %}
            <option {% if selectnapr == item.id %} selected {% endif %} value="{{item.id}}">{{item.name}}</option>
            {% endfor %}           
          </select>         
        </th>
        <th st-sort="bali" width="8%">
                  <input name="balli>" class="form-control" placeholder=">"/>
                  <input name="balli<" class="form-control" placeholder="<"/>
        </th>
        <th st-sort="state">
          <select class="form-control" name="status">
                <option {% if select == "0" %} selected {% endif %} value="0">Все</option>
                {% for item in Application %}
                <option {% if select == item.appState.id %} selected {% endif %} value="{{item.appState.id}}">{{item.appState.value}}</option>
                {% endfor %}                
          </select>
        </th>
        <th>
          <button type="submit" class="btn btn-primary" name="cancel" >Сбросить фильтр</button>
          <button type="submit" class="btn btn-primary" name="apply" >Применить фильтр</button>
        </th>
      </tr>
      </thead>
      <tbody>
      {% for item in applications %}
      <tr ng-repeat="row in displayedCollection">
        <td>{{ forloop.counter }}</td>
        <td><a href="{% url 'staff:application_review' item.app.id %}">{{ item.app.abiturient.fullname }}</a></td>
        <td>{% if item.app.eduform == 'О'%}Очная{% endif %}{% if not item.app.eduform == 'О'%}Заочная{%endif%}</td>
        <td>{{ item.app.date }}</td>
        <td>{{ item.doc.docType.value }}</td>
        <td>{% if item.doc.isCopy %} Оригинал {% endif %}{% if not item.doc.isCopy %} Копия {% endif %}</td>
        <td>{{ item.app.profile }}</td>
        <td>{{ item.app.points }}</td>
        <td>{{ item.app.appState.value }}</td>
        <th><div class="checkbox"><input type="checkbox" name="selected"></div></th>
      </tr>
      {% endfor %}
      </tbody>
    </table>
    <nav>
  <ul class="pagination">
    <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
    <li class="active"  ><a href="#">1 <span class="sr-only">(current)</span></a></li>
    <li class="disabled"><a href="#">2 <span class="sr-only">(current)</span></a></li>
    <li class="disabled"><a href="#">3 <span class="sr-only">(current)</span></a></li>
    <li class="disabled"><a href="#">4 <span class="sr-only">(current)</span></a></li>
    <li class="disabled"><a href="#">5 <span class="sr-only">(current)</span></a></li>
    <li class="disabled"><a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>
  </ul>
</nav>
  </form>
{% endblock %}

{% block scripts %}
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.2/angular.js"></script>
  <script src="https://cdn.rawgit.com/esvit/ng-table/v1.0.0/dist/ng-table.js"></script>
{% endblock %}
