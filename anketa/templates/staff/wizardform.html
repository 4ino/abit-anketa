{% extends "anketa/base.html" %}
{% load staticfiles %}


{% block additionalcss %}
<link href="{% static "anketa/css/prettify.css" %}" rel="stylesheet">

<link href="{% static "anketa/css/bootstrap-datetimepicker.min.css" %}" rel="stylesheet">
<link href="{% static "anketa/select2-3.5.4/select2.css" %}" rel="stylesheet">
<link href="{% static "anketa/select2-3.5.4/select2-bootstrap.css" %}" rel="stylesheet">
{% endblock %}

{% block scripts %}

<script src="{% static "anketa/js/moment.min.js" %}"></script>
<script src="{% static "anketa/js/ru.js" %}"></script>
<script src="{% static "anketa/js/bootstrap-datetimepicker.min.js" %}"></script>
<script src="{% static "anketa/js/jquery.bootstrap.wizard.js" %}"></script>
<script src="{% static "anketa/js/prettify.js" %}"></script>
<script src="{% static "anketa/select2-3.5.4/select2.min.js" %}"></script>
<script src="{% static "anketa/select2-3.5.4/ru.js" %}"></script>
<script src="{% static "anketa/js/notify.js" %}"></script>
<script src="{% static "anketa/js/kladr.js" %}"></script>


<script>

    $('#kladrbtn').on('click', function(e){
        //$('#KladrModal').modal();
        Kladr($('#streets'));
    });

    $('#birthday').datetimepicker({
        format:'DD.MM.YYYY',
        locale: 'ru',
        defaultDate:'{{data.application.abiturient.birthdate|date:"Y-m-d"}}'
    });
   
    $('#docde').datetimepicker({
        format:'DD.MM.YYYY',
        locale: 'ru',
        defaultDate:'{{data.passp.issueDate|date:"Y-m-d"}}'
    });

    $('#udaten').datetimepicker({
        format:'DD.MM.YYYY',
        locale: 'ru',
        defaultDate:'{{data.education.enterDate|date:"Y-m-d"}}'
    });
   
    $('#udateo').datetimepicker({
        format:'DD.MM.YYYY',
        locale: 'ru',
        defaultDate:'{{data.edud.issueDate|date:"Y-m-d"}}'
    });
    $('#bdate').datetimepicker({
       locale: 'ru'
    });
   
    
    $("#Mujik").focusout(function()
    {
        if($("id").id()=="a61")
        {
            $("#Mujik20" ).hide();       
        }
    });   
    

    function GetRegionID(){
        if($("#district").val().length === 0)
            return $("#idterritory").val();
        return $("#iddistrict").val();
    }
    $(document).ready(function() {
        $('#rootwizard').bootstrapWizard({onTabShow: function(tab, navigation, index) {
            var $total = navigation.find('li').length;
            var $current = index+1;
            var $percent = ($current/$total) * 100;
            $('#rootwizard').find('.bar').css({width:$percent+'%'});

            // If it's the last tab then hide the last button and show the finish instead
            if($current >= $total) {
                $('#rootwizard').find('.pager .next').hide();
                $('#rootwizard').find('.pager .finish').show();
                $('#rootwizard').find('.pager .finish').removeClass('disabled');
            } else {
                $('#rootwizard').find('.pager .next').show();
                $('#rootwizard').find('.pager .finish').hide();
            }

        }});
                     
        $('#rank').select2({
            language:"ru"
        });
        $('#edulvl').select2({
            language:"ru"
        });
        
        $('#edudoctype').select2({
            language:"ru"
        });
        
        $('#doctype').select2({
            language:"ru"
        });
        
        $('#nationality').select2({
            language:"ru"
        });
         $('#flang').select2({
            language:"ru"
        });
        $('#adrstype').select2({
            language:"ru"
        });
        

    /*$('.datepicker').pickadate({
        weekdaysShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
        showMonthsShort: true
    });*/
        $('#preveduname').select2({
            language:"ru",
            ajax:{
                url:{% url 'preveduname' %},
                dataType: 'json',
                delay: 250,
                data:function(params){
                    return{
                        query: params, // search term
                    };
                },
                processResults: function (data, page) {
                    // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to
                    // alter the remote JSON data
                    return {
                      results: data,
                    };
                },
                cache: true
            }
        });
     
        $('#eduprog').select2({
            language:"ru",
            minimumInputLength: 1,
            ajax:{
                url:{% url 'eduprof' %},
                dataType: 'json',
                delay: 250,
                data:function(params){
                    return{
                        query: params, // search term
                    };
                },
                processResults: function (data, page) {
                    // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to
                    // alter the remote JSON data
                    return {
                      results: data,
                    };
                },
                cache: true
            }
        });
        $('#inst').select2({
            language:"ru",
            minimumInputLength: 1,
            ajax:{
                url:{% url 'institute' %},
                dataType: 'json',
                delay: 250,
                data:function(params){
                    return{
                        query: params, // search term
                    };
                },
                processResults: function (data, page) {
                    // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to
                    // alter the remote JSON data
                    return {
                      results: data,
                    };
                },
                cache: true
            }
        });
        $('#docissuer').select2({
            language:"ru",
            ajax:{
                url:{% url 'docissuer' %},
                dataType: 'json',
                delay: 250,
                data:function(params){
                    return{
                        query: params, // search term
                    };
                },
                processResults: function (data, page) {
                    // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to
                    // alter the remote JSON data
                    return {
                      results: data,
                    };
                },
                cache: true
            }
        });
        $('#citizenship').select2({
            language:"ru",
            ajax:{
                url:{% url 'citizenship' %},
                dataType: 'json',
                delay: 250,
                data:function(params){
                    return{
                        query: params, // search term
                    };
                },
                processResults: function (data, page) {
                    // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to
                    // alter the remote JSON data
                    return {
                      results: data,
                    };
                },
                cache: true
            }
        });
    {% if data.application.abiturient.citizenship.value != None  %}
        $("#citizenship").select2('data',{id: '{{citizenship_id}}', text:"{{data.application.abiturient.citizenship.value}}"});
    {% endif %}
    {% if data.passp.docIssuer.value != None  %}
        $("#docissuer").select2('data',{id: '{{citizenship_id}}', text:"{{data.passp.docIssuer.value}}"});
    {% endif %}
    {% if data.edud.docIssuer.value != None  %}
        $("#preveduname").select2('data',{id: '{{citizenship_id}}', text:"{{data.edud.docIssuer.value}}"});
    {% endif %}
    {% if data.application.department != None  %}
        $("#inst").select2('data',{id: '{{citizenship_id}}', text:"{{data.application.department}}"});
    {% endif %}
    {% if data.application.edu_prog != None  %}
        $("#eduprog").select2('data',{id: '{{citizenship_id}}', text:"{{data.application.edu_prog.edu_prog}}"});
    {% endif %}
    });
</script>

<script>
    var countOfFields = 1; // Текущее число полей
    var curFieldNameId = 1; // Уникальное значение для атрибута name
    var maxFieldLimit = 10; // Максимальное число возможных полей
    function deleteField(a) {
      if (countOfFields > 1)
      {
     // Получаем доступ к ДИВу, содержащему поле
     var contDiv = a.parentNode;
     // Удаляем этот ДИВ из DOM-дерева
     contDiv.parentNode.removeChild(contDiv);
     // Уменьшаем значение текущего числа полей
     countOfFields--;
     }
     // Возвращаем false, чтобы не было перехода по сслыке
     return false;
    }
    function addField() {
     // Проверяем, не достигло ли число полей максимума
     if (countOfFields >= maxFieldLimit) {
     alert("Число полей достигло своего максимума = " + maxFieldLimit);
     return false;
     }
     // Увеличиваем текущее значение числа полей
     countOfFields++;
     // Увеличиваем ID
     curFieldNameId++;
     // Создаем элемент ДИВ
     var div = document.createElement("div");
     // Добавляем HTML-контент с пом. свойства innerHTML
     div.innerHTML = "<p><div class=\"col-xs-2 col-sm-2 col-md-2 col-md-offset-3\"><input name=\"subject[1]\" id=\"subject[" + curFieldNameId + "]\" class=\"form-control\"></div><div class=\"col-xs-2 col-sm-2 col-md-2\"><input name=\"points[" + curFieldNameId + "]\" id=\"points[" + curFieldNameId + "]\" class=\"form-control\"></div><div class=\"col-xs-1 col-sm-1 col-md-1\"><input name=\"year[" + curFieldNameId + "]\" id=\"year[" + curFieldNameId + "]\" class=\"form-control\"></div><br><a style=\"\" onclick=\"return deleteField(this)\" href=\"#\"><span class=\"glyphicon glyphicon-minus\"></span></a><a style=\"\" onclick=\"return addField()\" href=\"#\"><span class=\"glyphicon glyphicon-plus\"></span></a></p>";
     // Добавляем новый узел в конец списка полей
     document.getElementById("parentsubjectId").appendChild(div);
     // Возвращаем false, чтобы не было перехода по сслыке
     return false;
    }
</script>
<script>
    var countOfFieldsPersach = 1;
    var curFieldNameIdPersach = 1;
    var maxFieldLimitPersach = 10;

    function deleteFieldPersach(a) {
    if (countOfFieldsPersach > 1)
    {
     var contDiv = a.parentNode;
     contDiv.parentNode.removeChild(contDiv);
     countOfFieldsPersach--;
     }
     return false;
    }

    function addFieldPersach() {
     if (countOfFieldsPersach >= maxFieldLimitPersach) {
     alert("Число полей достигло своего максимума = " + maxFieldLimitPersach);
     return false;
     }
     countOfFieldsPersach++;
     curFieldNameIdPersach++;
     var div = document.createElement("div");
     div.innerHTML = "<p><div class=\"col-xs-2 col-sm-2 col-md-2 col-md-offset-3\"><input name=\"achievname[1]\" id=\"achievname[" + curFieldNameId + "]\" class=\"form-control\"></div><div class=\"col-xs-2 col-sm-2 col-md-2\"><input name=\"proof[" + curFieldNameId + "]\" id=\"proof[" + curFieldNameId + "]\" class=\"form-control\"></div><div class=\"col-xs-2 col-sm-2 col-md-2\"><input name=\"numbofpoints[" + curFieldNameId + "]\" id=\"numbofpoints[" + curFieldNameId + "]\" class=\"form-control\"></div><br><a style=\"\" onclick=\"return deleteFieldPersach(this)\" href=\"#\"><span class=\"glyphicon glyphicon-minus\"></span></a><a style=\"\" onclick=\"return addFieldPersach()\" href=\"#\"><span class=\"glyphicon glyphicon-plus\"></span></a></p>";
     document.getElementById("parentpersachId").appendChild(div);
     return false;
}
</script>
<script>
    var countOfTr = {{ data.relation_len }}; // Текущее число полей
    var curTrNameId = 1; // Уникальное значение для атрибута name
    var maxTrLimit = 10; // Максимальное число возможных полей
    function deletecontactrow(a) {
        if (countOfTr > 1)
        {
        // Получаем доступ к ДИВу, содержащему поле
        var contDiv = a.parentNode.parentNode;
        // Удаляем этот ДИВ из DOM-дерева
        contDiv.parentNode.removeChild(contDiv);
        // Уменьшаем значение текущего числа полей
        countOfTr--;
    }
    function applycontactrow(){
        
    }
     // Возвращаем false, чтобы не было перехода по сслыке
    return false;
    }
    function addcontactrow(){
        // Проверяем, не достигло ли число полей максимума
        if (countOfTr >= maxTrLimit) {
        alert("Число полей достигло своего максимума = " + maxTrLimit);
        return false;
        }
        // Увеличиваем текущее значение числа полей
        countOfTr++;
        // Увеличиваем ID
        curTrNameId++;
        // Создаем элемент ДИВ
        var tr = document.createElement("tr");
        tr.innerHTML = "<td><input type=\"text\" name=\"fio["+curTrNameId+"]\" id=\"fio["+curTrNameId+"]\" class=\"form-control\" placeholder=\"1\" value=\"\"></td><td><select id=\"rel_type["+curTrNameId+"]\" name = \"rel_type["+curTrNameId+"]\" class=\"form-control\">{% for item1 in data.rel_type %}<option {% if item1.id == item.type.id %}selected{% endif %} value=\"{{ item.type.id }}\">{{ item1.value }}</option>{% endfor %}</select></td><td><input type=\"text\" name=\"value["+curTrNameId+"]\" id=\"value["+curTrNameId+"]\" class=\"form-control\" placeholder=\"1\" value=\"\"></td><td><a style=\"\" onclick=\"return applycontactrow()\" href=\"#\"><span class=\"glyphicon glyphicon-ok\"></span></a><a style=\"\" onclick=\"return deletecontactrow(this)\" href=\"#\"><span class=\"glyphicon glyphicon-minus\"></span></a></td>";
        document.getElementById("TableContactAdd").appendChild(tr);
        return false;
    }
</script>
<script>
    {% if data.contacts1 %}
    var contactsrow = {{data.contacts1|length}};
    {% else %}
    var contactsrow = 1;
    {% endif %}
    var maxContacts = 10;
    $(document).on("click","button[id*='delContactRow']", function()
    {
        if(contactsrow>1)
        {
            $(this).parent().parent().remove();
            contactsrow--;
        }
    });

    $("#addContact").on("click", function()
    {
        if(contactsrow<maxContacts)
        {
            contactsrow++;
            var newRow = $('<tr class="info"><td><select id="contacttype" name = "contacttype" class="form-control">{% if data.contacts_type %}{% for item in data.contacts_type %}<option value="{{item.id}}">{{item.value}}</option>{% endfor %}{% endif %}</select></td><td><input type="text" class="form-control" name="contactvalue"></td><td><button class="btn btn-default btn-sm" id="delContactRow" type="button">Удалить</button></td></tr>');
                $("#contactsTable").append(newRow);
        }
            
    });
    $(document).on("click","button[id*='save']", function()
        {
            $("#currentPage").val(($(this).attr('id').slice('4')));

            alert($("#currentPage").val());
            $.ajax({
                url:"{% url 'staff:add_data_to_person' %}",
                type:$("#persondata").attr('method'),
                data:$("#persondata").serialize(),
                dataProcess:true,
                timeout:500,
                success:function(data)
                {
                    if (data==="success")
                    {
                        $.notify("Сохранено.", "success");
                    }
                    else
                    {
                        $.notify("Что-то пошло не так :(", "error");
                    }
                    
                },
                error:function()
                {
                    $.notify("Что-то пошло не так2 :(", "error");
                }
            });
        });


</script>

{% endblock %}

{% block content %}
{% include '..\templates\kladr\kladr.html' %}
<form id="persondata" name="persondata" class="form-horizontal" role="form" method="post" >
{% csrf_token %}
<div id = "rootwizard">
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <ul>
                    <li><a href="#tab1" data-toggle="tab">Личные данные</a></li>
                    <li><a href="#tab2" data-toggle="tab">Документы</a></li>
                    <li><a href="#tab3" data-toggle="tab">Контактные данные</a></li>
                    <li><a href="#tab4" data-toggle="tab">Заявление</a></li>
                    <li><a href="#tab5" data-toggle="tab">Экзамены</a></li>
                    <li><a href="#tab6" data-toggle="tab">Льготы</a></li>
                    <li><a href="#tab7" data-toggle="tab">Личные достижения</a></li>
                    <li><a href="#tab8" data-toggle="tab">Прочее</a></li>
                </ul>
            </div>
        </div>
    </div>
    <input type="hidden" name="currentPage" id="currentPage">
    <div class="tab-content">
        <div class="tab-pane" id="tab1">
            <div class = "container-fluid">
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="sname">Фамилия</label>
                            <input type = "text" name= "sname" id = "sname" class = "form-control" placeholder = "Иванов" value="{{data.application.abiturient.sname}}">
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="name">Имя</label>
                            <input type = "text" name= "name" id = "name" class = "form-control" placeholder = "Иван" value="{{data.application.abiturient.fname}}">
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="mname ">Отчество</label>
                            <input type="text" name = "mname" id ="mname" class="form-control" placeholder="Иванович" value="{{data.application.abiturient.mname}}">
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-3 col-sm-3 col-md-3 col-md-offset-3">
                        <p>
                            <div >
                                <label for="numberdoc">Дата рождения</label>
                                <div class="form-group">
                                    <div class='input-group date' id='birthday'>
                                        <input type='text' class="form-control" />
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </p>
                    </div>
                    <div class ="col-xs-3 col-sm-6 col-md-6"  >
                        <p></p>
                        <label for="sex">Пол</label>
                        <p>
                            <input type="radio" name = "sexM" value="p1"{% if data.application.abiturient.sex == 'М' %} checked {% endif %}>Мужской
                            <input type="radio" name = "sexW" value="p2"{% if data.application.abiturient.sex == 'Ж' %} checked {% endif %}>Женский
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="birthplace">Место рождения</label>
                            <input type="text" name = "birthplace" id ="birthplace" class="form-control" placeholder="Татуин" value="{{data.application.abiturient.birthplace}}">
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-3 col-sm-3 col-md-3 col-md-offset-3">
                        <p>
                            <label for="nation">Национальность(по желанию)</label>
                            <select id="nationality" name = "nationality" class="form-control">
                               {% for item in data.nationality %}
                               <option value="{{ item.id }}" {% if item.id == data.application.abiturient.nationality.id %}selected{% endif %}>{{ item.value }}</option>
                               {% endfor %}
                            </select>
                            <!--input id ="nationality" name="nationality" class="form-control" placeholder="Саха" value="{{item.application.abiturient.nationality}}"-->
                        </p>
                    </div>
                    <div class="col-xs-3 col-sm-3 col-md-3">
                        <p>
                            <label for="citizenship">Гражданство</label>
                            <input id="citizenship" name="citizenship" class="form-control" placeholder="РФ" hidden/>
                        </p>
                    </div>
                </div>
            </div>   
        </div>
        <div class="tab-pane" id="tab2">

            <div class = "container-fluid">
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="doctype">Вид документа, удостоверяющего личность</label>
                            <select id="doctype" name = "doctype" class="form-control">
                               {% for item in data.docType %}
                                    <option value="{{ item.id }}" {% if item.id == data.passp.doctype.id %}selected{% endif %} >{{ item.value }}</option>
                               {% endfor %}
                            </select>
                        </p>
                    </div>
                </div>
                
                <p>
                    <div class = "row">
                        <div class = "col-xs-2 col-sm-2 col-md-2 col-md-offset-3">
                            <label for="serialdoc">Серия</label>
                            <input type = "text" name = "serialdoc" id = "serialdoc" class = "form-control" placeholder="1234" value="{{data.passp.serialno}}">
                        </div>
                        <div class = "col-xs-2 col-sm-2 col-md-2">
                            <label for="numberdoc">Номер</label>
                            <input type = "text" name = "numberdoc" id = "numberdoc" class = "form-control" placeholder="123456" value="{{data.passp.number}}">
                        </div>
                                <div class="col-xs-2 col-sm-2 col-md-2">
                                    <label for="numberdoc">Дата выдачи</label>
                                    <div class="form-group">
                                        <div class='input-group date' id='docde'>
                                            <input type='text' class="form-control" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <!--script type="text/javascript">
                                    $(function () {
                                        $('#docdate').datetimepicker({
                                            locale: 'ru'
                                        });
                                    });
                                </script-->
                    </div>
                </p>
                
                <p>
                    <div class = "row">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                            <label for="docissuer">Кем выдан</label>                
                            <input id="docissuer" name="docissuer" class="form-control" placeholder="ТП УФМС РС(Я)" hidden/> 
                        </div>
                    </div>
                </p>
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="inila">СНИЛС</label>
                            <input id="inila" name="inila" class="form-control" placeholder="123-456-789-00"  value="{{ data.snils.number }}" />
                        </p>
                    </div>
                </div>
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="edudoctype">Вид документа об образовании</label>
                            <select name="edudoctype" id="edudoctype" size="1" class="form-control" >
                                {% for item in data.edudoctype %}
                                    <option value="{{ item.id }}" {% if item.id == data.edud.docType.id %}selected{% endif %} >{{ item.value }}</option>
                                {% endfor %}
                            </select>
                                  
                            </select>
                        </p>
                    </div>
                </div>
                <p>
                    <div class = "row">
                        <div class = "col-xs-3 col-sm-3 col-md-3 col-md-offset-3">
                            <label for="serialedudoc">Серия</label>
                            <input type = "text" name = "serialedudoc" id = "serialedudoc" class = "form-control" placeholder="1234" value="{{data.edud.serialno}}">
                        </div>
                        <div class = "col-xs-3 col-sm-3 col-md-3">
                            <label for="numberedudoc">Номер</label>
                            <input type = "text" name = "numberedudoc" id = "numberedudoc" class = "form-control" placeholder="123456" value="{{data.edud.number}}">
                        </div>
                    </div>
                </p>
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="prevedu">Уровень образования</label>
                            <p>
                                <input type = "radio" name= "prevedu" value="soo"{% if data.education.level.value == "СОО" %} checked {% endif %}>СОО 
                                <input type = "radio" name= "prevedu" value="npo"{% if data.education.level.value == "НПО" %} checked {% endif %}>НПО 
                                <input type = "radio" name= "prevedu" value="spo"{% if data.education.level.value == "СПО" %} checked {% endif %}>СПО 
                                <input type = "radio" name= "prevedu" value="vpo"{% if data.education.level.value == "ВПО" %} checked {% endif %}>ВПО
                            </p>
                        </p>
                    </div>
                </div>
                <p>
                    <div class="row">
                        <div class="col-xs-2 col-sm-2 col-md-2 col-md-offset-3">
                            <label for="numberdoc">Дата поступления</label>
                            <div class="form-group">
                                <div class='input-group date' id='udaten'>
                                    <input type='text' class="form-control" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                             </div>
                        </div>
                        <div class="col-xs-2 col-sm-2 col-md-2">
                            <label for="numberdoc">Дата окончания</label>
                            <div class="form-group">
                                <div class='input-group date' id='udateo'>
                                    <input type='text' class="form-control" name="dateexiting" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </p>
                <div class = "row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="preveduname">Название учебного заведения</label>                                            
                            <input id="preveduname" name="preveduname" class="form-control" placeholder="СВФУ им. Аммосова" hidden/>     
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="tab3">
            <div class="container-fluid">
                <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Адрес</h3>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-12 ">
                                    <p>
                                        <label for="option1">Адрес прописки совпадает с адресом факт. места жительства</label>
                                        <br>
                                        <input type = "radio" name= "option1" value="a11"{% if not data.application.address.adrs_type_same  %} checked {% endif %}>Нет
                                        <input type = "radio" name= "option1" value="a12"{% if data.application.address.adrs_type_same  %} checked {% endif %}>Да
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p>
                                    <div class="col-xs-6 col-sm-6 col-md-6">
                                        <label for="adrstype">Тип адреса</label>
                                        <select id="adrstype" name = "adrstype" class="form-control">
                                            <option value="perm">По прописке</option>
                                            <option value="current">Фактический</option>
                                        </select>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 col-md-6">
                                        <label for="adrsindex">Индекс</label>
                                        <input type = "text" name="adrsindex" id="adrsindex" class="form-control" placeholder="677000" {% if data.docs.zipcode != "" %} value="{{data.docs.zipcode}}" {% endif %}  {% if data.docs.zipcode == "" %} value="677000" {% endif %}> 
                                    </div>
                                 </p>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <p>
                                        <label for="streets">Адрес </label>
                                        <div class="input-group">
                                            <input id ="streets" name="streets" class="form-control" placeholder="Ленина" value="{{data.docs.street}}">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" id="kladrbtn">...</button>
                                            </span>
                                        </div>
                                    </p>
                                </div>
                            </div>
                            <div class="row">
                                <p>
                                <div class="col-xs-4 col-sm-4 col-md-4">
                                    <label for="adrshouse">Дом</label>
                                    <input type="text" name="adrshouse" id="adrshouse" class="form-control" placeholder="1" value="{{data.docs.house}}">
                                </div>
                                <div class="col-xs-4 col-sm-4 col-md-4">
                                    <label for="adrsbuilding">Корпус</label>
                                    <input type="text" name="adrsbuilding" id="adrsbuilding" class="form-control" placeholder="1" value="{{data.docs.building}}">
                                </div>
                                <div class="col-xs-4 col-sm-4 col-md-4">
                                    <label for="adrsflat">Квартира</label>
                                    <input type="text" name="adrsflat" id="adrsflat" class="form-control" placeholder="1" value="{{data.docs.flat}}">
                                </div>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
               </br>
               <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                    <!--<div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Контакты</h3>
                        </div>
                        <div class="panel-body">
                            <table class="table table-striped">
                                <thead>
                                    <th>Контакт</th>
                                    <th>#</th>
                                </thead>
                                <tbody id="TableContactAdd2">
                                    {% for item1 in data.contacts %}
                                    <tr>
                                        <td>
                                            <select id="contacttype2" name = "contacttype2" class="form-control">
                                                {% for item in data.contactyp %}
                                                <option {% if item.id == item1.contact_type.id %} selected {% endif %}  value="{{item.id}}">{{item.value}}</option>
                                                {% endfor %}
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text" class="form-control" name = "contactvalue[{{item1.id}}]" id="contactvalue[{{item1.id}}]" value ="{{item1.value}}">
                                        </td>
                                        <td>
                                            <a style="" onclick="return applycontactrow2(this)" href="#"><span class="glyphicon glyphicon-ok"></span></a>
                                            <a style="" onclick="return deletecontactrow2(this)" value="{{item1.id}}" href="#"><span class="glyphicon glyphicon-minus"></span></a>
                                        </td>
                                    </tr>

                                    {% endfor %}

                                </tbody>

                            </table>

                            <div class="col-md-offset-11">
                                <a style="" onclick="return addcontactrow2()" href="#"><span class="glyphicon glyphicon-plus"></span></a>   
                            </div> 
                             <button type="submit" class="btn btn-primary" name="sav1" >сохранить</button>                           
                        </div>
                    </div>-->
                    <input type="hidden" class="form-control" name = "wiz_cont_apply_name" id="wiz_cont_apply_name" value ="{{data.application.abiturient.id}}" hidden>

                    <div >
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Контакты</h3>
                            </div>
                            <div class="panel-body">
                                <div >
                                    <table class="table" id="table">
                                        <thead id="tablehead">
                                            <tr>
                                                <th>Тип контакта</th>
                                                <th>Номер</th>
                                            </tr>
                                        </thead>
                                        <tbody id="contactsTable">
                                            {% if data.contacts1 %}
                                                {% for item in data.contacts1 %}
                                                <tr>
                                                    <td>
                                                    <select id="contacttype" name = "contacttype" class="form-control">
                                                        {% if data.contacts_type %}
                                                            {% for item2 in data.contacts_type %}
                                                                <option value="{{item2.id}}" {% if item.type.id == item2.id %} selected {% endif %}>{{item2.value}}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                    </td>
                                                    <td><input type="text" class="form-control" name="contactvalue" value= {{item.value}}></td>
                                                    <td><button class="btn btn-default btn-sm" id="delContactRow" type="button">Удалить</button></td>
                                                </tr>
                                                {% endfor %}
                                            {% else %}
                                            <tr>
                                                <td>
                                                    <select id="contacttype" name = "contacttype" class="form-control">
                                                        {% if data.contacts_type %}
                                                            {% for item in data.contacts_type %}
                                                                <option value="{{item.id}}">{{item.value}}</option>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </select>
                                                </td>
                                                <td><input type="text" class="form-control" name="contactvalue"></td>
                                                <td><button class="btn btn-default btn-sm" id="delContactRow" type="button">Удалить</button></td>
                                            </tr>
                                            {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                                <div>
                                    <button class="btn btn-primary btn-block" type="button" id="addContact">Добавить контакт</button>
                                </div>
                                </br>
                                <div>
                                    <button class="btn btn-primary" type="button" id="save3">Сохранить</button>
                                </div>
                            </div>
                        </div>
                    </div>                  
                </div>
                <br>
                <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Родственники</h3>
                        </div>
                        <div class="panel-body">
                            <table class="table table-striped" >
                                <thead>
                                    <tr>
                                        <th>ФИО</th>
                                        <th>Номер</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="TableContactAdd">
                                    {% for item in data.relation %}
                                        <tr>                                
                                            <td><input type="text" name="fio[{{item.id}}]" id="fio[{{item.id}}]" class="form-control" placeholder="ФИО" value="{{item.text}}"></td>
                                            <td>
                                                <select id="rel_type[{{item.id}}]" name = "rel_type[{{item.id}}]" class="form-control">
                                                    {% for item1 in data.rel_type %}
                                                    <option {% if item1.id == item.type.id %}selected{% endif %} value="{{ item1.id }}">{{ item1.value }}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td><input type="text" name="value[{{item.id}}]" id="value[{{item.id}}]" class="form-control" placeholder="Значение" value="{{item.cont}}"></td>
                                            <td>                                        
                                                <a style="" onclick="return applycontactrow()" href="#"><span class="glyphicon glyphicon-ok"></span></a>
                                                <a style="" onclick="return deletecontactrow(this)" href="#"><span class="glyphicon glyphicon-minus"></span></a>
                                            </td>                               
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            <div class="col-md-offset-11">
                                <a style="" onclick="return addcontactrow()" href="#"><span class="glyphicon glyphicon-plus"></span></a>   
                            </div>                                       
                        </div>
                        <button type="submit" class="btn btn-primary" name="sav" >сохранить</button>
                </div>
                </div>
                
                <!--<div class="row">
                    <p>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                            <label for="addbtn"></label>
                            <button type="button" id="Add" name="Add" class="btn btn-default">
                                <span class="glyphicon glyphicon-plus"></span> Добавить
                            </button>
                        </div>
                    </p>
                </div>-->

            </div>
        </div>
        <div class="tab-pane" id="tab4">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <div class="col-xs-3 col-sm-3 col-md-4">
                        
                                <label for="option8">Приоритетность поступления</label><br>
                                <input type = "radio" name= "option23" value="a41"{% if data.application.priority == 'В' %} checked {% endif %}>Высокий
                                <input type = "radio" name= "option23" value="a42"{% if data.application.priority == 'С' %} checked {% endif %}>Средний
                                <input type = "radio" name= "option23" value="a43"{% if data.application.priority == 'Н' %} checked {% endif %}>Низкий
                            </div>
                            </br>
                            <label for="option2">Прошу допустить меня к участию в конкурсе</label>
                            <br>
                            <input type = "radio" name= "option2" value="a21"{% if data.application.budget != None   %} checked {% endif %}> в рамках контр.цифр приема
                            <input type = "radio" name= "option2" value="a22"{% if data.application.withfee != None %} checked {% endif %}> по договорам об оказании платных обр.услуг
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="inst">Институт/факультет</label>
                            <input name="inst" id="inst" class="form-control" placeholder="Институт Математики и Информатики" value="{{data.application.department.name}}">
                            <input name="idinst" id="idinst" hidden/>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="eduprog">Направление/специальность</label>
                            <input name="eduprog" id="eduprog" class="form-control" placeholder="информатика и вычислительная техника" value="{{data.education_prog.name}}">
                            <input name="ideduprog" id="ideduprog" hidden/>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="eduprof">Профили в порядке убывания приоритета</label>
                            <input name="eduprof" id="eduprof" class="form-control" placeholder="">
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-3 col-sm-3 col-md-3 col-md-offset-3">
                        <p>
                            <label for="option4">Форма обучения</label><br>
                            <input type = "radio" name= "option4" value="a41"{% if data.application.edu_prog.eduform == 'О' %} checked {% endif %}>Очная
                            <input type = "radio" name= "option4" value="a42"{% if data.application.edu_prog.eduform == 'З' %} checked {% endif %}>Заочная
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="edulvl">Уровень обучения</label>
                            <select name = "edulvl" size="1" id ="edulvl" class="form-control">
                            <option value = "bach">Бакалавриат</option>
                            <option value = "spec">Специалитет</option>
                            <option value = "mag">Магистатура</option>
                            </select>
                       
                            
                        </p>
                    </div>
                </div>
                <!--<div class="row">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                            <button type="button" id="Add" name="Add" class="btn btn-default">
                                <span class="glyphicon glyphicon-plus"></span> Добавить
                            </button>
                        </div>
                </div> 
                -->
            </div>
        </div>
        <div class="tab-pane" id="tab5">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                           <b>Прошу засчитать рез-ты ЕГЭ</b>
                        </p>
                    </div>
                </div>
                <div id="parentsubjectId" class="row">
                    <div>
                    {% for item in Exams %}
                        <p>
                            <div class="col-xs-2 col-sm-2 col-md-2 col-md-offset-3">
                                <label for="subject[1]">Дисциплина</label>
                                <input name="subject[1]" id="subject[1]" class="form-control" placeholder="Математика" value="{{item.data.exams.exam_subjects}}">
                            </div>
                            <div class="col-xs-2 col-sm-2 col-md-2">
                                <label for="points[1]">Баллы</label>
                                <input name="points[1]" id="points[1]" class="form-control"     placeholder="100"value="{{item.data.exams.points}}">
                            </div>
                            <div class="col-xs-1 col-sm-1 col-md-1">
                                <label for="year[1]">Год</label>
                                <input name="year[1]" id="year[1]" class="form-control" placeholder="2015" value="{{item.data.exams.year}}">
                            </div>
                        {% endfor %}
                        <br>
                            <a style="" onclick="return deleteField(this)" href="#"><span class="glyphicon glyphicon-minus"></span></a>
                            <a style="" onclick="return addField()" href="#"><span class="glyphicon glyphicon-plus"></span></a>
                        </p>
                    </div>
                </div>
            <br>
            <br>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                           <b>Также прошу допустить к вступительным испытаниям по следующим предметам</b>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <p>
                        <div id="parentsubjectId" class="row">
                    <div>
                    {% for item in Exams %}
                        <p>
                            <div class="col-xs-2 col-sm-2 col-md-2 col-md-offset-3">
                                <label for="subject[1]">Дисциплина</label>
                                <input name="subject[1]" id="subject[1]" class="form-control" placeholder="Математика" value="{{item.data.exams.exam_subjects}}">
                            </div>
                    {% endfor %}
                        <br>
                        <a style="" onclick="return deleteField(this)" href="#"><span class="glyphicon glyphicon-minus"></span></a>
                        <a style="" onclick="return addField()" href="#"><span class="glyphicon glyphicon-plus"></span></a>
                        </p>
                    </div>
                </div>
                    </p>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                           <b>Прошу создать специальные условия при сдаче вступ. исп-й в связи с ограниченными возможностями здоровья</b>
                            <br>
                            <input type = "radio" name= "option8" value="a51"{% if not data.privilegies.category %} checked {% endif %}>Нет
                            <input type = "radio" name= "option8" value="a52"{% if data.privilegies.category %} checked {% endif %}>Да
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="tab6">
            <div class="container-fluid">
                <div class="row">
                    <p>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                         <label for="privcat">Категория</label>
                            <select id="privcat" name = "privcat" class="form-control">
                               
                            </select> 
                        </div>
                    </p>
                </div>
                <div class="row">
                    <p>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                            <label for="privtype">Тип</label>
                            <select id="privtype" name = "privtype" class="form-control">
                               
                            </select> 
                        </div>

                    </p>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="tab7">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <label for="persach">Имеются ли достижения?</label>
                        <p>
                            <input type = "radio" name= "persach" value="a1"{% if not data.DepAchieves.profile  %} checked {% endif %}>Нет</label>
                            <input type = "radio" name= "persach" value="a2"{% if data.DepAchieves.profile %} checked {% endif %}>Да</label>
                        </p>
                    </div>
                </div>
                <div id="parentpersachId" class="row">
                    <div>
                        <p>
                            <div class="col-xs-2 col-sm-2 col-md-2 col-md-offset-3">
                                <label for="achievname[1]">Наименование достижения</label>
                                <input name="achievname[1]" {% if not data.DepAchieves.profile  %} disabled {% endif %}  id="achievname[1]" class="form-control" placeholder="По жизни чемпион" value="{{data.achievements.result}}">
                            </div>
                            <div class="col-xs-2 col-sm-2 col-md-2">
                                <label for="proof[1]" hidden/>Подтверждающие документы</label>
                                <input name="proof[1]" id="proof[1]" class="form-control" placeholder="Я тебе говорю" value="{{data.docattr.value}}" hidden/></input>
                            </div>
                            <div class="col-xs-2 col-sm-2 col-md-2">
                                <label for="numbofpoints[1]" >Причисляемый балл</label>
                                <input name="numbofpoints[1]"   disabled  id="numbofpoints[1]" class="form-control" placeholder="+100" value="{{data.depachieves.points}}">
                            </div>
                            </br>
                            <a style="" onclick="return deleteFieldPersach(this)" href="#"><span class="glyphicon glyphicon-minus"></span></a>
                            <a style="" onclick="return addFieldPersach()" href="#"><span class="glyphicon glyphicon-plus"></span></a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane" id="tab8">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <p>
                            <label for="flang">Изучаемый иностранный язык</label>
                            <select name="flang" id="flang"  class="form-control">
                            {% for item in data.foreign_lang %}
                                <option name= "flang" id = "flang" class = "form-control" value="{{ item.id }}">{{ item.value }}</option>
                            {% endfor %} 
                            </select>
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                        <label for="hostel">Нуждаетесь ли в общежитие?</label>
                        <p>
                            <input type = "radio" name= "hostel" value="a1"{% if not data.abiturient.hostel %} checked {% endif %}>Нет
                            <input type = "radio" name= "hostel" value="a2"{% if data.abiturient.hostel %} checked {% endif %}>Да
                        </p>
                    </div>
                </div>
                <p>
                    <div class="row">
                            <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                                <label for="option6">Являетесь ли вы военнообязанным?</label>
                                <p>
                                    <input type = "radio" name= "option6" value="a61"{% if not data.milit.liableForMilit %} checked {% endif %}>Невоеннообязанный
                                    <input type = "radio" name= "option6" value="a62"{% if data.milit.liableForMilit %} checked {% endif %}>Военнообязанный
                                </p>
                            </div>
                    </div>
                </p>
                <p>
                    <div class="row" id="Mujik">
                            <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                                <label for="option7">Служили в армии?</label>
                                
                                    <p>
                                        <input type = "radio" name= "option7" id="pacan" value="a62"{% if data.milit.isServed %} checked {% endif %}>Да
                                        <input type = "radio" name= "option7" id="nepacan" value="a61"{% if not data.milit.isServed %} checked {% endif %}>Нет
                                        
                                    </p>
                                
                            </div>
                    </div>
                </p>
                <p >
                    <div class="row" id="Mujik20"  >
                            <div class="col-xs-3 col-sm-3 col-md-3 col-md-offset-3">
                                <label for="yeararmy">Год увольнения из рядов РА</label>
                                <input type="text" name="yeararmy" id="yeararmy" class="form-control" placeholder="2014" value="{{ data.milit.yeardismissial }}">
                            </div>
                            <div class="col-xs-3 col-sm-3 col-md-3">
                                <label for="rank">Воинское звание</label>
                                <select name="rank" id="rank"  class="form-control">                  
                                    {% for item in data.rank %}
                                        <option name= "rank" id = "rank" class = "form-control" value="{{ item.id }}">{{ item.value }}</option>
                                    {% endfor %} 
                                </select>
                            </div>
                            </br>
                            
                    </div>
                </p>
                
            <p><tt id="results"></tt></p>

            </div>
        </br> </br> </br>  </br>
        </div>
            <div class="col-xs-6 col-sm-6 col-md-6 col-md-offset-3">
                <ul class="pager wizard">
                    <li class="previous first"><a href="javascript:;">First</a></li>
                    <li class="previous"><a href="javascript:;">Previous</a></li>
                    <li class="next last" ><a href="javascript:;">Last</a></li>
                    <li class="next"><a href="javascript:;">Next</a></li>
                    <li class="next finish" style="display:none;" ><a href="javascript:;">Finish</a></li>
                </ul>
            </div>  
    </div>
</div>
</form> 
{% endblock %}
